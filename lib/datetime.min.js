!function(n){"use strict";var d="YYYY-MM-DDTHH:mm:ss.sss",e="Invalid date",f=/\[([^\]]+)]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|m{1,2}|s{1,3}/g;function m(t,e,n){return t=""+t,n&&n<=t.length?t:Array(n+1-t.length).join(e)+t}function i(t){return null==t}function datetime(){var t;return arguments[0]instanceof Datetime?arguments[0].clone():(t=[].slice.call(Array.isArray(arguments[0])?arguments[0]:arguments),new(Function.prototype.bind.apply(Datetime,[this].concat(t))))}n.DATETIME_LOCALES={en:{months:"January February March April May June July August September October November December".split(" "),monthsShort:"Jan Feb Mar Apr May Jun Jul Aug Sep Oct Nov Dec".split(" "),weekdays:"Sunday Monday Tuesday Wednesday Thursday Friday Saturday".split(" "),weekdaysShort:"Sun Mon Tue Wed Thu Fri Sat".split(" "),weekdaysMin:"Su Mo Tu We Th Fr Sa".split(" "),weekStart:0}};var a={ms:"Milliseconds",s:"Seconds",m:"Minutes",h:"Hours",D:"Date",d:"Day",M:"Month",Y:"FullYear",y:"Year",t:"Time"},r="ms",s="second",u="minute",o="hour",h="day",c="week",l="month",y="year",Datetime=function(){var t=[].slice.call(arguments);if(this.value=new(Function.prototype.bind.apply(Date,[this].concat(t))),this.locale="en",this.weekStart=n.DATETIME_LOCALES.en.weekStart,this.utcMode=!1,this.mutable=!0,isNaN(this.value.getTime()))throw new Error(e)};Datetime.DEFAULT_FORMAT=d,Datetime.REGEX_FORMAT=f,Datetime.INVALID_DATE=e,Datetime.lpad=m,Datetime.not=i,Datetime.isDatetime=function(t){return t instanceof Datetime},Datetime.now=function(t){return datetime()[t?"val":"time"]()},Datetime.locale=function(t,e){n.DATETIME_LOCALES[t]=e},Datetime.getLocale=function(t){return n.DATETIME_LOCALES[t||"en"]||n.DATETIME_LOCALES.en},Datetime.parse=function(t){return datetime(Date.parse(t))},Datetime.align=function(t,e){var n,i,a=t instanceof Datetime?t:datetime(t);switch(e){case s:n=a.ms(0);break;case u:n=Datetime.align(a,s)[s](0);break;case o:n=Datetime.align(a,u)[u](0);break;case h:n=Datetime.align(a,o)[o](0);break;case l:n=Datetime.align(a,h)[h](1);break;case y:n=Datetime.align(a,l)[l](0);break;case c:i=a.weekDay(),n=Datetime.align(a,h).addDay(-i);break;default:n=a}return n},Datetime.alignEnd=function(t,e){var n,i,a=t instanceof Datetime?t:datetime(t);switch(e){case r:n=a.ms(999);break;case s:n=Datetime.alignEnd(a,r);break;case u:n=Datetime.alignEnd(a,s)[s](59);break;case o:n=Datetime.alignEnd(a,u)[u](59);break;case h:n=Datetime.alignEnd(a,o)[o](23);break;case l:n=Datetime.alignEnd(a,h)[h](1).add(1,l).add(-1,h);break;case y:n=Datetime.alignEnd(a,h)[l](11)[h](31);break;case c:i=a.weekDay(),n=Datetime.alignEnd(a,"day").addDay(6-i);break;default:n=a}return n},Datetime.extend=function(t){for(var e,n,i=arguments.length,a=1;a<i;a++)if(null!=(e=arguments[a]))for(n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t},Datetime.use=function(t){Datetime.extend(Datetime.prototype,t)},Datetime.useStatic=function(t){Datetime.extend(Datetime,t)},Datetime.prototype={immutable:function(t){return this.mutable=!(i(t)||t),this},utc:function(){return this.utcMode=!0,this},local:function(){return this.utcMode=!1,this},useLocale:function(t){return-1===Object.keys(n.DATETIME_LOCALES).indexOf(t)?console.warn("Locale "+t+" is not defined!"):(this.locale=t,this.weekStart=Datetime.getLocale(t).weekStart),this},clone:function(){var t=datetime(this.value);return t.locale=this.locale,t.mutable=this.mutable,t.weekStart=this.weekStart,t},align:function(t){return this.mutable?(this.value=Datetime.align(this,t).val(),this):this.clone().immutable(!1).align(t).immutable(!this.mutable)},alignEnd:function(t){return this.mutable?(this.value=Datetime.alignEnd(this,t).val(),this):this.clone().immutable(!1).alignEnd(t).immutable(!this.mutable)},val:function(t){return t instanceof Date?this.mutable?(this.value=t,this):datetime(t):this.value},year2:function(){return+(""+this.year()).substr(-2)},_set:function(t,e){var n="set"+(this.utcMode&&"t"!==t?"UTC":"")+a[t];if(this.mutable)return this.value[n](e),this;t=this.clone();return t.value[n](e),t},_get:function(t){t="get"+(this.utcMode&&"t"!==t?"UTC":"")+a[t];return this.value[t]()},_work:function(t,e){return arguments.length&&null!=e?this._set(t,e):this._get(t)},ms:function(t){return this._work("ms",t)},second:function(t){return this._work("s",t)},minute:function(t){return this._work("m",t)},hour:function(t){return this._work("h",t)},day:function(t){return this._work("D",t)},month:function(t){return this._work("M",t)},year:function(t){return this._work("Y",t)},time:function(t){return this._work("t",t)},weekDay:function(t){if(!arguments.length||i(t))return this.utcMode?this.value.getUTCDay():this.value.getDay();t-=this.weekDay();return this.day(this.day()+t),this},get:function(t){return"function"!=typeof this[t]?this:this[t]()},set:function(t,e){return"function"!=typeof this[t]?this:this[t](e)},add:function(t,e){switch(e){case o:return this.time(this.time()+60*t*60*1e3);case u:return this.time(this.time()+60*t*1e3);case s:return this.time(this.time()+1e3*t);case r:return this.time(this.time()+t);case h:return this.day(this.day()+t);case c:return this.day(this.day()+7*t);case l:return this.month(this.month()+t);case y:return this.year(this.year()+t)}},addHour:function(t){return this.add(t,o)},addMinute:function(t){return this.add(t,u)},addSecond:function(t){return this.add(t,s)},addMs:function(t){return this.add(t,r)},addDay:function(t){return this.add(t,h)},addWeek:function(t){return this.add(t,c)},addMonth:function(t){return this.add(t,l)},addYear:function(t){return this.add(t,y)},format:function(t,e){var n=t||d,i=Datetime.getLocale(e||this.locale),a=this.year(),r=this.year2(),s=this.month(),u=this.day(),o=this.weekDay(),h=this.hour(),c=this.minute(),t=this.second(),e=this.ms(),l={YY:r,YYYY:a,M:s+1,MM:m(s+1,"0",2),MMM:i.monthsShort[s],MMMM:i.months[s],D:u,DD:m(u,"0",2),d:o,dd:i.weekdaysMin[o],ddd:i.weekdaysShort[o],dddd:i.weekdays[o],H:h,HH:m(h,"0",2),m:c,mm:m(c,"0",2),s:t,ss:m(t,"0",2),sss:m(e,"0",3)};return n.replace(f,function(t,e){return e||l[t]})},valueOf:function(){return this.value.valueOf()},toString:function(){return this.value.toString()}},n.Datetime=Datetime,n.datetime=datetime}("undefined"==typeof self?"undefined"==typeof global?window:global:self);