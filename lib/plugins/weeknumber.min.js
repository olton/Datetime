!function(){"use strict";var u=Datetime.prototype.format,n=Datetime.lpad;Datetime.use({weekNumber:function(e){var t,r,i;return e=+e||0,t=0<=(t=(r=datetime(this.year(),0,1)).weekDay()-e)?t:t+7,r=Math.floor((this.time()-r.time()-6e4*(this.utcOffset()-r.utcOffset()))/864e5)+1,t<4?52<(i=Math.floor((r+t-1)/7)+1)&&(i=(e=0<=(e=datetime(this.year()+1,0,1).weekDay()-e)?e:e+7)<4?1:53):i=Math.floor((r+t-1)/7),i},isoWeekNumber:function(){return this.weekNumber(1)},weeksInYear:function(e){return datetime(this.value).month(11).day(31).weekNumber(e)},format:function(e,t){var r,i=this.weekNumber(),a=this.isoWeekNumber();return e=e||Datetime.DEFAULT_FORMAT,r={W:i,WW:n(i,"0",2),WWW:a,WWWW:n(a,"0",2)},e=e.replace(/(\[[^\]]+])|W{1,4}/g,function(e,t){return t||r[e]}),u.bind(this)(e,t)}})}();